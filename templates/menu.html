{% extends "base.html" %}
{% block contenido %}
    <main>
    <div class="container">
        <div class="row">
            <div class="col m6"><h3 style="margin:20px 0px;">Menu de platillos</h3></div>
            <div class="col m4 input-field">
                <input id="Busqueda" type="text" class="validate">
                <label for="Busqueda">Buscar plato</label>
            </div>
            <div class="col m2" style="margin:30px 0px 10px 0px;">
                <a onclick="buscarPlato()" class="waves-effect waves-light btn"><i class="material-icons">search</i></a>
            </div>
        </div>
        <div class="row">
            {% for plato in platos%}
            <form action="/Menu" method="POST">
            <div class="col m4 plato">
                <div class="card hoverable">
                    <div class="card-image">
                        <img src="/static/img/{{plato[4]}}" height="200px" width="auto">
                        <a class="flotante_star btn-floating waves-effect waves-light"><i class="material-icons">star_border</i></a>
                    </div>
                    <div class="card-content">
                        <span class="card-title platoNombre">{{plato[1]}}</span>
                        <p style="font-size:22px; font-style: italic;">${{plato[2]}}</p>
                    </div>
                    <div class="card-action card_with2button" >
                        <input id="id_plato" name="id_plato" type="hidden" value="{{plato[0]}}">
                        <input id="precio" name="precio" type="hidden" value="{{plato[2]}}">
                        <button class="waves-effect waves-light btn" type="submit">Agregar</button>
                        <a class="waves-effect waves-light btn purple" href="/Menu/detalle_plato/{{plato[0]}}">Detalles</a>
                    </div>
                </div>
            </div>
            </form>
            {% endfor %}                                                   
        </div>
    </div>
    </main>
{% endblock %}
{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            M.AutoInit();
            var elems = document.querySelectorAll('.dropdown-trigger');
            var instances = M.Dropdown.init(elems, options);
        });
        function buscarPlato(){
            var platoCard = document.getElementsByClassName("plato");
            var platos = document.getElementsByClassName("platoNombre");
            var busqueda = document.getElementById("Busqueda").value;
            for(let i=0;i<platos.length; i++){
                if(busqueda == ""){
                    platoCard[i].style.display = "block";
                }else{
                    if(!platos[i].innerText.toLowerCase().includes(busqueda.toLowerCase())){
                        platoCard[i].style.display = "none";
                    }else{
                        platoCard[i].style.display = "block";
                    }
                }
            }
        }
    </script>
{% endblock %}